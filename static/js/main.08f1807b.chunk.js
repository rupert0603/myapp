(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var r,a,s,o,c=n(1),i=n.n(c),l=n(19),d=n.n(l),u=(n(41),n(5)),h=n(6),j=n(8),p=n(7),b=(n(42),n(3)),O=n(17),y=n(15),f=n.n(y),m=function(e){return{type:"LOGIN",payload:e}},g=function(e){return{type:"SET_ENTRIES",payload:e}},E=function(e){return{type:"SET_SHOW_MONTHLY_ENTRIES",payload:e}},x=n(4),S=n(0),v=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={username:"",password:""},e.loginBtnHandler=function(){f.a.post("https://nameless-reaches-87715.herokuapp.com/",e.state).then((function(t){t.data.error?alert(t.data.error):(localStorage.setItem("token",t.data.token),localStorage.setItem("currentUser",JSON.stringify(t.data.userFound)),e.props.login(t.data.userFound))}))},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this;return Object(S.jsxs)("div",{children:["Username:"," ",Object(S.jsx)("input",{type:"text",value:this.state.username,onChange:function(t){e.setState({username:t.target.value})}}),Object(S.jsx)("br",{}),"Password:"," ",Object(S.jsx)("input",{type:"password",value:this.state.password,onChange:function(t){e.setState({password:t.target.value})}}),Object(S.jsx)("br",{}),Object(S.jsx)("button",{onClick:this.loginBtnHandler,children:"Login"})]})}}]),n}(i.a.Component),C=Object(x.b)(null,{login:m})(v),k=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={firstName:"",lastName:"",username:"",password:"",confirmPassword:""},e.register=function(){if(e.state.confirmPassword!==e.state.password)return alert("Passwords doesn't match. Please type the same passwords");f.a.post("https://nameless-reaches-87715.herokuapp.com/register",e.state).then((function(t){localStorage.setItem("token",t.data.token),localStorage.setItem("currentUser",JSON.stringify(t.data.userData)),e.props.login(t.data.userData)}))},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this;return Object(S.jsxs)("div",{children:["First Name:"," ",Object(S.jsx)("input",{type:"text",value:this.state.firstName,onChange:function(t){e.setState({firstName:t.target.value})}}),Object(S.jsx)("br",{}),"Last Name:"," ",Object(S.jsx)("input",{type:"text",value:this.state.lastName,onChange:function(t){e.setState({lastName:t.target.value})}}),Object(S.jsx)("br",{}),"Username:"," ",Object(S.jsx)("input",{type:"text",value:this.state.username,onChange:function(t){e.setState({username:t.target.value})}}),Object(S.jsx)("br",{}),"Password:"," ",Object(S.jsx)("input",{type:"password",value:this.state.password,onChange:function(t){e.setState({password:t.target.value})}}),Object(S.jsx)("br",{}),"Confirm Password:"," ",Object(S.jsx)("input",{type:"password",value:this.state.confirmPassword,onChange:function(t){e.setState({confirmPassword:t.target.value})}}),Object(S.jsx)("br",{}),Object(S.jsx)("button",{onClick:this.register,children:"Register"})]})}}]),n}(i.a.Component),w=Object(x.b)(null,{login:m})(k),N=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={dateForm:"",contentForm:""},e.dateChangeHandler=function(t){e.setState({dateForm:t.target.value})},e.contentChangeHandler=function(t){e.setState({contentForm:t.target.value})},e.submitFormHandler=function(t){e.setState({dateForm:"",contentForm:""}),e.addNewEntryHandler(),e.props.toggleAddEntryForm(),t.preventDefault()},e.addNewEntryHandler=function(){f.a.post("https://nameless-reaches-87715.herokuapp.com/entries",{user_id:e.props.currentUser._id,entryDate:e.state.dateForm,content:e.state.contentForm},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){var n=JSON.parse(localStorage.getItem("entries"));n.push(t.data),localStorage.setItem("entries",JSON.stringify(n)),e.props.addEntry(t.data),alert("Entry Added!")}))},e}return Object(h.a)(n,[{key:"render",value:function(){return Object(S.jsxs)("div",{children:[Object(S.jsxs)("form",{onSubmit:this.submitFormHandler,children:[Object(S.jsx)("br",{}),Object(S.jsx)("label",{htmlFor:"date",children:"Journal Entry Date:"}),Object(S.jsx)("br",{}),Object(S.jsx)("input",{type:"date",id:"date",required:!0,onChange:this.dateChangeHandler}),Object(S.jsx)("br",{}),Object(S.jsx)("br",{}),Object(S.jsx)("label",{htmlFor:"content",children:"Journal Entry Content:"}),Object(S.jsx)("br",{}),Object(S.jsx)("textarea",{autoFocus:!0,id:"content",cols:"60",rows:"20",onChange:this.contentChangeHandler}),Object(S.jsx)("br",{}),Object(S.jsx)("input",{type:"submit",value:"Save"})]}),Object(S.jsx)("br",{})]})}}]),n}(i.a.Component),D=Object(x.b)((function(e){return{currentUser:e.user}}),{setEntries:g,addEntry:function(e){return{type:"ADD_ENTRY",payload:e}}})(N),I=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this;return Object(S.jsx)("div",{className:"month",children:Object(S.jsx)("div",{onClick:function(){e.props.setShowMonthlyEntries(e.props.index)},children:this.props.month})})}}]),n}(i.a.Component),M=Object(x.b)((function(e){return{filteredEntriesByYear:e.filteredEntriesByYear}}),{setShowMonthlyEntries:E})(I),B=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],F=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).previousClickHandler=function(){e.props.setSelectedYear(e.props.year-1)},e.nextClickHandler=function(){e.props.setSelectedYear(e.props.year+1)},e}return Object(h.a)(n,[{key:"render",value:function(){return Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{children:[Object(S.jsx)("span",{className:"yearChanger",onClick:this.previousClickHandler,children:"Previous"}),Object(S.jsxs)("span",{children:[" ",this.props.year," "]}),Object(S.jsx)("span",{className:"yearChanger",onClick:this.nextClickHandler,children:"Next"})]}),Object(S.jsx)("br",{}),Object(S.jsx)("div",{className:"monthsContainer",children:B.map((function(e,t){return Object(S.jsx)(M,{month:e,index:t},e)}))}),Object(S.jsx)("br",{})]})}}]),n}(i.a.Component),_=Object(x.b)((function(e){return{year:e.yearSelected}}),{setSelectedYear:function(e){return{type:"SET_SELECTED_YEAR",payload:e}}})(F),A=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={isEditClicked:!1,isDeleteClicked:!1,editedContent:e.props.entry.content},e.editContentChangeHandler=function(t){e.setState({editedContent:t.target.value})},e.editBtnClickHandler=function(){e.setState({isEditClicked:!e.state.isEditClicked})},e.deleteBtnClickHandler=function(){e.setState({isDeleteClicked:!e.state.isDeleteClicked})},e.submitBtnHandler=function(){f.a.patch("https://nameless-reaches-87715.herokuapp.com/entries/"+e.props.entry._id,{content:e.state.editedContent},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){for(var n=JSON.parse(localStorage.getItem("entries")),r=0;r<n.length;++r)if(n[r]._id===t.data._id){n[r].content=e.state.editedContent;break}localStorage.setItem("entries",JSON.stringify(n)),e.setState({isEditClicked:!1,isDeleteClicked:!1}),e.props.updateEntry({updatedEntries:n,entryUpdated:t.data,newContent:e.state.editedContent}),alert("Entry Updated!")}))},e.deleteEntry=function(){f.a.delete("https://nameless-reaches-87715.herokuapp.com/entries/"+e.props.entry._id,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){var n=JSON.parse(localStorage.getItem("entries"));n=n.filter((function(e){return e._id!==t.data._id})),localStorage.setItem("entries",JSON.stringify(n)),e.setState({isDeleteClicked:!e.state.isDeleteClicked}),e.props.deleteEntry(t.data),alert("Entty deleted!")}))},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this;return Object(S.jsxs)("div",{autoFocus:!0,className:"entryContainer",children:[Object(S.jsx)("div",{className:"entryDate",children:this.props.entry.entryDate}),Object(S.jsxs)("div",{children:[Object(S.jsx)("button",{onClick:this.editBtnClickHandler,children:"Edit"})," ",Object(S.jsx)("button",{onClick:this.deleteBtnClickHandler,children:"Delete"})]}),Object(S.jsx)("p",{className:"entryContent",children:this.props.entry.content}),this.state.isEditClicked?Object(S.jsxs)("div",{children:[Object(S.jsx)("textarea",{autoFocus:!0,id:"content",cols:"60",rows:"20",onChange:this.editContentChangeHandler,value:this.state.editedContent}),Object(S.jsx)("br",{}),Object(S.jsx)("button",{onClick:this.submitBtnHandler,children:"Submit"})]}):null,this.state.isDeleteClicked?Object(S.jsxs)("div",{className:"deleteForm",children:[Object(S.jsx)("p",{children:"Are you sure you want to delete this entry?"}),Object(S.jsxs)("div",{children:[Object(S.jsx)("button",{onClick:this.deleteEntry,children:"Yes"})," ",Object(S.jsx)("button",{autoFocus:!0,onClick:function(){e.setState({isDeleteClicked:!e.state.isDeleteClicked})},children:"No"})]})]}):null,Object(S.jsx)("br",{})]})}}]),n}(i.a.Component),H=Object(x.b)((function(e){return{currentUser:e.user,entries:e.entries}}),{updateEntry:function(e){return{type:"UPDATE_ENTRY",payload:e}},deleteEntry:function(e){return{type:"DELETE_ENTRY",payload:e}}})(A),T=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(S.jsx)("div",{className:"monthlyEntriesContainer",children:this.props.filteredEntriesByMonth.map((function(e,t){return Object(S.jsx)(H,{entry:e},t)}))})}}]),n}(i.a.Component),U=Object(x.b)((function(e){return{filteredEntriesByMonth:e.filteredEntriesByMonth}}),{setShowMonthlyEntries:E})(T),Y=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={showAddEntryForm:!1,isLogoutClicked:!1},e.toggleAddEntryForm=function(){e.setState({showAddEntryForm:!1})},e.logoutHandler=function(){localStorage.removeItem("currentUser"),localStorage.removeItem("token"),localStorage.removeItem("entries"),e.setState({isLogoutClicked:!0}),e.props.logout()},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;localStorage.getItem("currentUser")&&f.a.get("https://nameless-reaches-87715.herokuapp.com/entries/",{headers:{Authorization:"Bearer "+localStorage.getItem("token")},params:{user_id:this.props.currentUser._id}}).then((function(t){localStorage.setItem("entries",JSON.stringify(t.data.entries)),e.props.setEntries(t.data.entries)}))}},{key:"render",value:function(){var e=this;return Object(S.jsx)("div",{className:"mainContainer",children:localStorage.getItem("currentUser")&&localStorage.getItem("token")?Object(S.jsxs)("div",{children:[Object(S.jsxs)("nav",{children:[Object(S.jsx)("span",{children:JSON.parse(localStorage.getItem("currentUser")).username}),Object(S.jsx)("span",{className:"logout",onClick:this.logoutHandler,children:"Logout"})]}),Object(S.jsxs)("p",{children:["Hello, ",this.props.currentUser.firstName,"! How was your day?"]}),Object(S.jsx)("br",{}),Object(S.jsx)("div",{onClick:function(){e.setState({showAddEntryForm:!e.state.showAddEntryForm})},className:"addNewEntry",children:"Add New Entry"}),this.state.showAddEntryForm?Object(S.jsx)(D,{toggleAddEntryForm:this.toggleAddEntryForm}):null,Object(S.jsx)("br",{}),Object(S.jsx)(_,{}),this.props.showMonthlyEntries?Object(S.jsx)(U,{}):null]}):Object(S.jsx)("div",{children:Object(S.jsx)(b.a,{to:"/"})})})}}]),n}(i.a.Component),J=Object(x.b)((function(e){return{currentUser:e.user,showMonthlyEntries:e.showMonthlyEntries}}),{setEntries:g,logout:function(){return{type:"LOGOUT"}}})(Y),L=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(S.jsx)("div",{className:"App",children:Object(S.jsxs)("header",{className:"App-header",children:[localStorage.getItem("currentUser")&&localStorage.getItem("token")?Object(S.jsx)(b.a,{to:"/entries"}):Object(S.jsx)(b.a,{to:"/"}),Object(S.jsxs)(b.b,{exact:!0,path:"/",children:[Object(S.jsx)("h1",{children:"DIARY APP"}),Object(S.jsx)(C,{}),Object(S.jsxs)("div",{children:["Not yet a member? Register ",Object(S.jsx)(O.b,{to:"/register",children:"here"})]})]}),Object(S.jsx)(b.b,{exact:!0,path:"/register",children:Object(S.jsx)(w,{})}),Object(S.jsx)(b.b,{exact:!0,path:"/entries",children:Object(S.jsx)(J,{})})]})})}}]),n}(i.a.Component),P=Object(x.b)((function(e){return{currentUser:e.user}}))(L),R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,68)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),s(e),o(e)}))},z=n(21),G=n(9),W=[],q=(new Date).getFullYear(),K=function(e,t){return e.filter((function(e){return 1*e.entryDate.slice(0,4)===t}))},Q=function(e,t){var n;return n=e.filter((function(e){return 1*e.entryDate.slice(5,7)===t})),n=V(n)},V=function(e){for(var t=e,n=0;n<t.length-1;++n){for(var r=t[n],a=n,s=n+1;s<=t.length-1;++s)1*r.entryDate.slice(8)>1*t[s].entryDate.slice(8)&&(r=t[s],a=s);t[a]=t[n],t[n]=r,a=0}return t};localStorage.getItem("currentUser")&&localStorage.getItem("token")?(r=JSON.parse(localStorage.getItem("currentUser")),W=JSON.parse(localStorage.getItem("entries"))):(r=null,W=[]),a=W?K(W,q):[];var X={user:r,entries:W,yearSelected:q,filteredEntriesByYear:a,showMonthlyEntries:!1,filteredEntriesByMonth:[],currentMonthShown:-1},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(G.a)(Object(G.a)({},e),{},{user:t.payload});case"SET_ENTRIES":return s=K(t.payload,e.yearSelected),Object(G.a)(Object(G.a)({},e),{},{entries:t.payload,filteredEntriesByYear:s});case"ADD_ENTRY":var n=1*t.payload.entryDate.slice(5,7);o=e.filteredEntriesByMonth;var r=e.entries;return r.push(t.payload),1*t.payload.entryDate.slice(0,4)===e.yearSelected&&(s=e.filteredEntriesByYear).push(t.payload),-1!==e.currentMonthShown&&n===e.currentMonthShown+1&&(o=Q(s,e.currentMonthShown+1)),Object(G.a)(Object(G.a)({},e),{},{entries:r,filteredEntriesByYear:s,filteredEntriesByMonth:o});case"SET_USER":return Object(G.a)(Object(G.a)({},e),{},{user:JSON.parse(localStorage.getItem("currentUser"))});case"SET_SELECTED_YEAR":return s=K(e.entries,t.payload),Object(G.a)(Object(G.a)({},e),{},{yearSelected:t.payload,filteredEntriesByYear:s,showMonthlyEntries:!1,filteredEntriesByMonth:[],currentMonthShown:-1});case"SET_SHOW_MONTHLY_ENTRIES":var a,c;return(a=t.payload!==e.currentMonthShown||!e.showMonthlyEntries)?(c=t.payload,o=Q(e.filteredEntriesByYear,t.payload+1)):(c=-1,o=[]),Object(G.a)(Object(G.a)({},e),{},{showMonthlyEntries:a,filteredEntriesByMonth:o,currentMonthShown:c});case"UPDATE_ENTRY":return W=(W=e.entries).map((function(e){return e._id===t.payload.entryUpdated._id&&(e.content=t.payload.newContent),e})),s=K(W,e.yearSelected),o=Q(W,e.currentMonthShown+1),Object(G.a)(Object(G.a)({},e),{},{entries:W,filteredEntriesByYear:s,filteredEntriesByMonth:o});case"DELETE_ENTRY":return o=e.filteredEntriesByMonth,W=e.entries.filter((function(e){return e._id!==t.payload._id})),s=K(W,e.yearSelected),o=o.filter((function(e){return e._id!==t.payload._id})),Object(G.a)(Object(G.a)({},e),{},{entries:W,filteredEntriesByYear:s,filteredEntriesByMonth:o});case"LOGOUT":return{user:null,entries:[],yearSelected:q,filteredEntriesByYear:[],showMonthlyEntries:!1,filteredEntriesByMonth:[],currentMonthShown:-1};default:return e}};d.a.render(Object(S.jsx)(i.a.StrictMode,{children:Object(S.jsx)(x.a,{store:Object(z.b)(Z),children:Object(S.jsx)(O.a,{children:Object(S.jsx)(P,{})})})}),document.getElementById("root")),R()}},[[67,1,2]]]);
//# sourceMappingURL=main.08f1807b.chunk.js.map